<!DOCTYPE html>
<html>
<meta charset="UTF-8">

<head>
    <title>Zones & Bridge Consoles</title>
    <script>

        var zone1connection = new WebSocket("ws://192.168.0.151:5678/");
        zone1connection.onopen = function () {
            zone1connection.send("Message from Browser- Working!" + new Date());
            zone1connection.send('ping');
            zone1connection.send('Time: ' + new Date());
        };

        zone1connection.onerror = function (error) {
            console.log('WebSocket Error ', error);
        };

        zone1connection.onmessage = function (e) {
            console.log('Server: ', e.data);
            zone1connection.send('Time: ' + new Date());
            var message = e.data;
            document.getElementById("zone1body").innerHTML = document.getElementById("zone1body").innerHTML +
                "<br>" + message;
            var str = document.getElementById('zone1body').innerHTML;
            var element = document.getElementById("zone1body");
            trimText(element);
            element.scrollIntoView({
                behavior: "smooth",
                block: "end",
                inline: "nearest"
            });
        };

        var zone3connection = new WebSocket('ws://192.168.0.155:5678/');
        zone3connection.onopen = function () {
            zone3connection.send('Message from Browser to PI -- its Working!! ' + new Date());
            zone3connection.send('ping');
            zone3connection.send('Time: ' + new Date());
        };

        zone3connection.onerror = function (error) {
            console.log('WebSocket Error ', error);
        };

        zone3connection.onmessage = function (e) {
            console.log('Server: ', e.data);
            zone3connection.send('Time: ' + new Date());
            var element = document.getElementById("zone3body");
            trimText(element);
            var message = e.data;
            document.getElementById("zone3body").innerHTML = document.getElementById("zone3body").innerHTML +
                "<br>" + message;
            var str = document.getElementById('zone3body').innerHTML;

            element.scrollIntoView({
                behavior: "smooth",
                block: "end",
                inline: "nearest"
            });
        };

        var connection = new WebSocket('ws://192.168.0.230:81/', ['arduino']);
        connection.onopen = function () {
            connection.send('Message from Browser to ESP8266 yay its Working!! ' + new Date());
            connection.send('ping');
            connection.send('Time: ' + new Date());
        };

        connection.onerror = function (error) {
            console.log('WebSocket Error ', error);
        };

        connection.onmessage = function (e) {
            console.log('Server: ', e.data);
            connection.send('Time: ' + new Date());
            var element = document.getElementById("mybody");
            trimText(element);
            var message = e.data;
            document.getElementById("mybody").innerHTML = document.getElementById("mybody").innerHTML + message;
            var str = document.getElementById('mybody').innerHTML;

            element.scrollIntoView({
                behavior: "smooth",
                block: "end",
                inline: "nearest"
            });
        };
        function trimText(elementID) {
            var textLen = 5000;
            var p = elementID;
            if (p) {
                var targetText = p.innerHTML;
                if (targetText.length > textLen) {
                    targetText = targetText.slice(targetText.length - textLen);
                    targetText = targetText.substring(targetText.indexOf('<br>') + 4);
                    p.innerHTML = targetText;
                }
            }
        };

    </script>
</head>

<style>
    * {
        box-sizing: border-box;
    }

    body {
        background-color: rgb(40, 66, 114);
    }

    button {
        border: 1;
        border-radius: 0.3rem;
        background-color: #2d9612;
        color: #000;
        line-height: 2.4rem;
        font-size: 1.2rem;
        -webkit-transition-duration: 0.4s;
        transition-duration: 0.4s;
        cursor: pointer;
    }

    .shell-wrap {
        width: 33.3%;
        float: left;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 3px;
    }

    .shell-top-bar {
        font: 1em 'Andale Mono', Consolas, 'Courier New';
        width: 99%;
        float: left;
        text-align: center;
        color: #3a3030;
        padding: 10px 0;
        margin: 0;
        text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.5);
        /* font-size: 1em; */
        border: 1px solid #CCCCCC;
        border-bottom: none;
        -webkit-border-top-left-radius: 3px;
        -webkit-border-top-right-radius: 3px;
        -moz-border-radius-topleft: 3px;
        -moz-border-radius-topright: 3px;
        border-top-left-radius: 3px;
        border-top-right-radius: 3px;
        background: #f7f7f7;
        /* Old browsers */
        background: -moz-linear-gradient(top, #f7f7f7 0%, #B8B8B8 100%);
        /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #f7f7f7), color-stop(100%, #B8B8B8));
        /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, #f7f7f7 0%, #B8B8B8 100%);
        /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, #f7f7f7 0%, #B8B8B8 100%);
        /* Opera 11.10+ */
        background: -ms-linear-gradient(top, #f7f7f7 0%, #B8B8B8 100%);
        /* IE10+ */
        background: linear-gradient(to bottom, #f7f7f7 0%, #B8B8B8 100%);
        /* W3C */
        filter: progid: DXImageTransform.Microsoft.gradient(startColorstr='#f7f7f7', endColorstr='#B8B8B8', GradientType=0);
        /* IE6-9 */
    }

    .shell-body {
        /* scroll-behavior: smooth; */
        width: 99%;
        height: 75vh;
        overflow: auto;
        margin: 0;
        padding: 10px;
        list-style: none;
        white-space: pre;
        background: #141414;
        border-color: #B8B8B8;
        border: 2px solid rgb(151, 161, 151);
        border-width: 0 thin thin;
        color: rgb(107, 218, 59);
        font: 0.8em 'Andale Mono', Consolas, 'Courier New';
        line-height: 1.1em;
        -webkit-border-bottom-right-radius: 3px;
        -webkit-border-bottom-left-radius: 3px;
        -moz-border-radius-bottomright: 3px;
        -moz-border-radius-bottomleft: 3px;
        border-bottom-right-radius: 3px;
        border-bottom-left-radius: 3px;
    }

    @media screen and (max-width:600px) {
        .shell-wrap {
            width: 100%;
        }
    }
</style>

<body>
    <div class="panelrow">

        <div class="shell-wrap">
            <div class="shell-top-bar">Zone 1</div>
            <div class="shell-body">
                <div id="zone1body"></div>
            </div>
        </div>

        <div class="shell-wrap">
            <div class="shell-top-bar">Zone 3</div>
            <div class="shell-body">
                <div id="zone3body"></div>
            </div>
        </div>

        <div class="shell-wrap">
            <div class="shell-top-bar">Bridge</div>
            <div class="shell-body">
                <div id="mybody"></div>
            </div>
        </div>

    </div>

</body>

</html>